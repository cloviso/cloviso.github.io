<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Echarts读书笔记 | Hexo</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Echarts读书笔记</h1><a id="logo" href="/.">Hexo</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Echarts读书笔记</h1><div class="post-meta">Jul 18, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h2 id="Echarts-开发过程"><a href="#Echarts-开发过程" class="headerlink" title="Echarts 开发过程"></a>Echarts 开发过程</h2><h2 id="主要过程"><a href="#主要过程" class="headerlink" title="主要过程"></a>主要过程</h2><ol>
<li><p>按照需求文档将要开发的图表转化成业务逻辑。  主要难点是写SQL （XXXMapper.xml 文件中配置）</p>
</li>
<li><p>服务端写接口。封装前端需要传参数（查询）、或者请求参数（时间）成Java类。主要有mapper 接口、 service 实现方法 、封装model实体类、XXXReq(请求的)、XXXRes(要返回的)、还有明细封装XXXDtl类等方法。</p>
</li>
<li><p>业务应用端。三层MVC框架模式。</p>
<ul>
<li><p>先写service 调用服务端开发好的接口。分析封装前端需要Echarts图表数据类型，然后写Dto层。继续写serviceImpl 实现类，实则调用接口中的mapper 方法。（C）</p>
</li>
<li><p>然后写JS ,将后端传来的数据需要拼接成Echarts 图表的json 数据格式。Ajax异步请求。（V）</p>
</li>
<li><p>最后将UI的切好的HTML转化为JSP页面。</p>
<p>​</p>
</li>
</ul>
<h2 id="先举个例子"><a href="#先举个例子" class="headerlink" title="先举个例子"></a><strong>先举个例子</strong></h2><p>由于用的最多的是柱形图 那就这个啦。其实echarts插件就是一个图形库，用来展示json文件的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;name:value&#125; name 是 key 值 ，value 是数组列表类型。很简单的两组数据，一组是月份（对应xAxis），一组是库存量(对应yAxis)。</div></pre></td></tr></table></figure>
<ol>
<li>先贴json 数据格式 </li>
</ol>
<p>​</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">* 第一种数据结构 * 明显是一个对象 里面套了两个数组。</div><div class="line"><span class="number">1.</span>json</div><div class="line">&#123;</div><div class="line"><span class="string">"month"</span>: [</div><div class="line">    <span class="string">"1月"</span>,</div><div class="line">    <span class="string">"2月"</span>,</div><div class="line">    <span class="string">"3月"</span>,</div><div class="line">    <span class="string">"4月"</span>,</div><div class="line">    <span class="string">"5月"</span>,</div><div class="line">    <span class="string">"6月"</span></div><div class="line">],</div><div class="line"><span class="string">"num"</span>: [</div><div class="line">    <span class="number">100</span>,</div><div class="line">    <span class="number">200</span>,</div><div class="line">    <span class="number">300</span>,</div><div class="line">    <span class="number">400</span>,</div><div class="line">    <span class="number">500</span>,</div><div class="line">    <span class="number">600</span></div><div class="line">&#125;</div><div class="line">  * 第二中数据结构 * 直接一个数组， 里面套了&#123;<span class="attr">name</span>:value&#125;这种数据格式。</div><div class="line">  <span class="number">2.</span>json</div><div class="line">  [</div><div class="line">    &#123;</div><div class="line">        <span class="string">"month"</span> : <span class="string">"1月"</span>,</div><div class="line">        <span class="string">"num"</span> : <span class="number">100</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"month"</span> : <span class="string">"2月"</span>,</div><div class="line">        <span class="string">"num"</span> : <span class="number">200</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"month"</span> : <span class="string">"3月"</span>,</div><div class="line">        <span class="string">"num"</span> : <span class="number">300</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"month"</span> : <span class="string">"4月"</span>,</div><div class="line">        <span class="string">"num"</span> : <span class="number">400</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"month"</span> : <span class="string">"5月"</span>,</div><div class="line">        <span class="string">"num"</span> : <span class="number">500</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"month"</span> : <span class="string">"6月"</span>,</div><div class="line">        <span class="string">"num"</span> : <span class="number">600</span></div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>​</p>
<ol>
<li>写页面Jsp 中抽离出来的 Js</li>
</ol>
<p>​</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">第一种数据结构数据设置</div><div class="line"></div><div class="line"><span class="comment">// 先确定用于展示echart的标签块，在html文件里面需要写一个div，并给他的id命名为main</span></div><div class="line"></div><div class="line">var dom = document.getElementById(<span class="string">'main'</span>);</div><div class="line"></div><div class="line">var myChart = echarts.init(dom);</div><div class="line"></div><div class="line"><span class="comment">// 用jQuery当中的ajax来加载json数据，所以一定要引入jQuery文件</span></div><div class="line"></div><div class="line">$.ajax(&#123;</div><div class="line">type: <span class="string">'post'</span>,</div><div class="line">url: <span class="string">'../data/1.json'</span></div><div class="line">&#125;).done(function(data) &#123;</div><div class="line">myChart.setOption(&#123;</div><div class="line">    title: &#123;</div><div class="line">        text: <span class="string">'库存量统计'</span></div><div class="line">    &#125;,</div><div class="line">    tooltip: &#123;&#125;,</div><div class="line">    legend: &#123;</div><div class="line">        data: [<span class="string">'库存量'</span>]</div><div class="line">    &#125;,</div><div class="line">   </div><div class="line">   <span class="comment">// 在echarts文档中，xAxis里面展示的是data: ['1月份', '2月份'...]这样的数据，但是因为通过json文  		件检索，所以我们只需要写出x轴需要的数据即可</span></div><div class="line">    xAxis: &#123;</div><div class="line">        data: data.month</div><div class="line">    &#125;,</div><div class="line">    yAxis: &#123;&#125;,</div><div class="line">    series: [&#123;</div><div class="line">        name: <span class="string">'库存量'</span>,</div><div class="line">        type: <span class="string">'bar'</span>,</div><div class="line">        data: data.num</div><div class="line">    &#125;]</div><div class="line">&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>​<br>​</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">如果需要在页面当中加载多个图表，则需要定义多个图表，例如  就是定义div </div><div class="line">var FirstChart = echarts.init(document.getElementById(id1));</div><div class="line">var SecondChart = echarts.init(document.getElementById(id2));</div><div class="line">。。。。。。</div></pre></td></tr></table></figure>
<p>​</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">第一种数据结构数据设置</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">var dom = document.getElementById(&apos;main&apos;);</div><div class="line">// 初始化Echarts数据</div><div class="line">var myChart = echarts.init(dom);</div><div class="line"></div><div class="line">// monthArr 和 numArr两个数组，是我用来存放月份数据和库存量数据的</div><div class="line"></div><div class="line">var monthArr = [];</div><div class="line"></div><div class="line">var numArr = [];</div><div class="line"></div><div class="line">$.ajax(&#123;</div><div class="line">type: &apos;post&apos;,</div><div class="line">url: &apos;../data/2.json&apos;</div><div class="line">&#125;).done(function(data) &#123;</div><div class="line">// 将月份数据和库存量数据都存入数据中，和上面的用法就会一样了，就是多了一层需要遍历数组。</div><div class="line">for(var i = 0; i &lt; data.length; i++) &#123;</div><div class="line">    monthArr.push(data[i].month);</div><div class="line">    numArr.push(data[i].num);</div><div class="line">&#125;</div><div class="line">myChart.setOption(&#123;</div><div class="line">    title: &#123;</div><div class="line">        text: &apos;库存量统计&apos;</div><div class="line">    &#125;,</div><div class="line">    tooltip: &#123;&#125;,</div><div class="line">    legend: &#123;</div><div class="line">        data: [&apos;库存量&apos;]</div><div class="line">    &#125;,</div><div class="line">    xAxis: &#123;</div><div class="line">        data: monthArr</div><div class="line">    &#125;,</div><div class="line">    yAxis: &#123;&#125;,</div><div class="line">    series: [&#123;</div><div class="line">        name: &apos;库存量&apos;,</div><div class="line">        type: &apos;bar&apos;,</div><div class="line">        data: numArr</div><div class="line">    &#125;]</div><div class="line">&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>​<br>再说点和开发无关的</p>
<hr>
</li>
</ol>
<p>​         </p>
<p>   就饼状图 pie 和柱状图bar、折线图line 数据结构也是类似的。比较复杂的是地图类和三维坐标系以上或者极坐标形式。说到地图，感概一下，当时做这个的时候，发现居然地图可以被图表实现出来，虽然不会非常复杂，但是大部分的应用场景已经足够了，比如我们修改成仓库地图的时候。其实最复杂的还是后台数据的封装。</p>
<p>   有时候会有疑惑：</p>
<ul>
<li>我的这些数据 饼状图、折线图、柱状图 好像都可以使用，那到底用哪一个好呢？</li>
<li>饼图其实和环形图差不多，取决于我要在中间显示其他内容吗？</li>
<li><p>……</p>
<p> 那么图表不一样，后台数据结构类型差不多，这样就需要区分这些图表想表达的意思，像 饼图表达的是整体和局部的关系，也就是一部分占据整体比例的多少。柱状图和折线图较为接近，前者想要表达不同对象的数据对比，后者则倾向于表示同一对象数据在不同（时间）维度上的趋势。</p>
<p> ​</p>
</li>
</ul>
<h5 id="当时做的时候遇到的比较大的前端的困难是对其中的-params-参数的理解，params-参数表征了整个图表对象的信息。"><a href="#当时做的时候遇到的比较大的前端的困难是对其中的-params-参数的理解，params-参数表征了整个图表对象的信息。" class="headerlink" title="当时做的时候遇到的比较大的前端的困难是对其中的 params 参数的理解，params 参数表征了整个图表对象的信息。"></a>当时做的时候遇到的比较大的前端的困难是对其中的 params 参数的理解，params 参数表征了整个图表对象的信息。</h5><p>当时需要做和仓库地图图表上的仓库圆点事件进行交互：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">myChart.on(&apos;click&apos;, function (params) &#123;</div><div class="line">	//获取参数 添加事件点击方法</div><div class="line">    doFunction(params.name));</div><div class="line">		......</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<!--当时做的比较一个复杂的待补货款（图例Tooltip 点击事件）-->
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 加载函数</div><div class="line">$(function()&#123;</div><div class="line">// 加载待补货款 短溢金额数据</div><div class="line">getDemandPay();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">/**</div><div class="line"> * 获取待补货款 委卖、买 数据</div><div class="line"> */</div><div class="line">function getDemandPay() &#123;</div><div class="line">	$.post(&#123;</div><div class="line">		url : &quot;riskDelivery/getDemandPayChart&quot;,</div><div class="line">		data : null,</div><div class="line">		timeout : 5000, //超时时间</div><div class="line">		success : function(data) &#123;</div><div class="line">			initDemandPay(data);</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 图表变量定义</div><div class="line"> */</div><div class="line"></div><div class="line">// tooltip 类型定义</div><div class="line">var tp_name_arr = [&apos;总&apos;,&apos;买&apos;,&apos;卖&apos;];</div><div class="line"></div><div class="line">// 总量名称</div><div class="line">var sumXList = new Array();</div><div class="line">// 买 名称</div><div class="line">var buyXList = new Array();</div><div class="line">// 卖 名称</div><div class="line">var saleXList = new Array();</div><div class="line"></div><div class="line">// 总量(图表) - 总(类型) - 数据</div><div class="line">var sumDataList = new Array();</div><div class="line">// 总量 - 买 - 数据</div><div class="line">var sumBuyDtList = new Array();</div><div class="line">// 总量 - 卖 - 数据</div><div class="line">var sumSaleDtList = new Array();</div><div class="line">// 买 - 数据</div><div class="line">var buyDataList = new Array();</div><div class="line">// 卖 - 数据</div><div class="line">var saleDateList = new Array();</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 解析待补货款 数据</div><div class="line">	 */	</div><div class="line">function initDemandPay(data) &#123;</div><div class="line">	</div><div class="line">	if (!isNull(data)) &#123;</div><div class="line">		$(&quot;#demandPaySum&quot;).html(data.demandPaySum);		  // 计算待补货款差额</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div></pre></td><td class="code"><pre><div class="line">	// 线上违约总量数据列表</div><div class="line">	var demandPaySumList = data.demandPaySumList; </div><div class="line">	</div><div class="line">	// 买方待补货款总量数据列表</div><div class="line">	var demandPayBuyList = data.demandPayBuyList;</div><div class="line">	// 卖方待补货款总量数据列表</div><div class="line">	var demandPaySaleList = data.demandPaySaleList;</div><div class="line">	// 坐标轴X时间数据</div><div class="line">	var firmNameList=data.firmNameList;</div><div class="line">	</div><div class="line">	var data_DemandPay = [demandPaySumList,demandPayBuyList,demandPaySaleList]</div><div class="line">	</div><div class="line">	// 解析买卖的X坐标名称</div><div class="line">	sumXList = initXList(demandPaySumList);</div><div class="line">	buyXList = initXList(demandPayBuyList);</div><div class="line">	saleXList = initXList(demandPaySaleList);</div><div class="line">	</div><div class="line">	// 解析总量的数据</div><div class="line">	sumDataList = initDataList(demandPaySumList, 1);</div><div class="line">	sumBuyDtList = initDataList(demandPaySumList, 2);</div><div class="line">	sumSaleDtList = initDataList(demandPaySumList, 3);</div><div class="line">	//解析 买卖数据</div><div class="line">	buyDataList = initDataList(demandPayBuyList, 1);</div><div class="line">	saleDataList = initDataList(demandPaySaleList, 1);</div><div class="line">	</div><div class="line">	//基于准备好的dom，初始化echarts实例</div><div class="line">	 var myChart_stay = echarts.init(document.getElementById(&apos;echart-stay&apos;));</div><div class="line"></div><div class="line">	 // option</div><div class="line">	 option_stay =  &#123;</div><div class="line">	 	color: CColor[0],</div><div class="line">//	 	title: title_Gold,</div><div class="line">	 	tooltip: &#123;</div><div class="line">	 		trigger: &apos;item&apos;,</div><div class="line">	 		axisPointer: &#123;type: &apos;shadow&apos;, animation: true, label: &#123; backgroundColor:&apos;rgba(117,117,132,.75)&apos;, borderWidth: 0, shadowBlur: 0, textStyle: &#123;color: &apos;#fff&apos;&#125;&#125;&#125;,</div><div class="line">	 		backgroundColor:&apos;rgba(83,83,98,.95)&apos;,</div><div class="line">	 		textStyle: &#123;color: &apos;#fff&apos;&#125;,</div><div class="line">	 		padding: 12, showDelay: 15,</div><div class="line">	 		formatter: function (dealer) &#123;</div><div class="line">	 		var value = dealer.value;</div><div class="line">	 			return &apos;&lt;div style=&quot;border-bottom: 1px solid rgba(255,255,255,.3); padding-bottom: 7px; margin-bottom: 7px&quot;&gt;&apos;</div><div class="line">	 			+ dealer.seriesName + &apos;：&lt;br&gt;&apos;</div><div class="line">	 			+ &apos;&lt;/div&gt;&apos;</div><div class="line">	 			+ value + &apos; 万元&apos;</div><div class="line">	 		&#125;</div><div class="line">	 	&#125;, //提示层</div><div class="line">	 	grid: &#123;</div><div class="line">	 		left: 0,</div><div class="line">	 		right: 0,</div><div class="line">	 		top: 36,</div><div class="line">	 		bottom: 52,</div><div class="line">	 		containLabel: true</div><div class="line">	 	&#125;,</div><div class="line">	 	xAxis : &#123;</div><div class="line">	 		scale: true,</div><div class="line">	 		type: &apos;category&apos;,</div><div class="line">	 		axisLine: &#123;show: false,lineStyle:&#123;color:&apos;#aaa&apos;&#125;&#125;,</div><div class="line">	 		axisTick: &#123;show: false&#125;,</div><div class="line">	 		splitArea: &#123;show: false&#125;,</div><div class="line">	 		data: firmNameList,</div><div class="line">	 		//设置字体倾斜  </div><div class="line">            axisLabel:&#123;  </div><div class="line">                interval:0,  </div><div class="line">                rotate:45,//倾斜度 -90 至 90 默认为0  </div><div class="line">                margin:2,  </div><div class="line">                textStyle:&#123;  </div><div class="line">                    fontWeight:&quot;bolder&quot;,  </div><div class="line">                    color:&quot;#000000&quot;  </div><div class="line">                &#125;  </div><div class="line">            &#125;,    </div><div class="line">	 	&#125;,</div><div class="line">	 	yAxis : yAxis_Amount[4],</div><div class="line">	 	legend: legend_High[1],</div><div class="line">	 	series : [</div><div class="line">	 		&#123;</div><div class="line">	 			name:tp_name_arr[1],</div><div class="line">	 			type:&apos;bar&apos;,</div><div class="line">	 			stack: &apos;i&apos;,</div><div class="line">	 			barWidth: &apos;50%&apos;,</div><div class="line">	 			barGap: &apos;-100%&apos;,</div><div class="line">	 			z: 5,</div><div class="line">	 			data: data_DemandPay[1]</div><div class="line">	 		&#125;,</div><div class="line">	 		&#123;</div><div class="line">	 			name:tp_name_arr[2],</div><div class="line">	 			type:&apos;bar&apos;,</div><div class="line">	 			stack: &apos;i&apos;,</div><div class="line">	 			barWidth: &apos;50%&apos;,</div><div class="line">	 			barGap: &apos;-100%&apos;,</div><div class="line">	 			z: 5,</div><div class="line">	 			data: data_DemandPay[2]</div><div class="line">	 		&#125;</div><div class="line">	 		/*,</div><div class="line">	 		&#123;</div><div class="line">				name:&apos;总量&apos;,</div><div class="line">				type:&apos;bar&apos;,</div><div class="line">				stack: &apos;ii&apos;,</div><div class="line">				barWidth: &apos;50%&apos;,</div><div class="line">				label: label_Stay,</div><div class="line">				itemStyle: itemStyle_Stay,</div><div class="line">				data: data_DemandPay[0]</div><div class="line">			&#125;*/</div><div class="line">	 	]</div><div class="line">	 &#125;;</div><div class="line">	 </div><div class="line">	    myChart_stay.on(&apos;legendselectchanged&apos;, function (params) &#123; </div><div class="line">	    option_stay = setChartOption(params, option_stay);</div><div class="line">	    myChart_stay.setOption(option_stay);</div><div class="line">	     </div><div class="line">	&#125;);</div><div class="line">	 </div><div class="line">	 // 默认加载总量 </div><div class="line">	 option_stay.xAxis.data = sumXList;</div><div class="line">	 option_stay.series[0].data = sumBuyDtList;</div><div class="line">	 option_stay.series[1].data = sumSaleDtList;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">	 myChart_stay.setOption(option_stay);</div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * 读取X轴交易商名称坐标</div><div class="line"> * @param dataList  X轴名称数据</div><div class="line"> * @returns</div><div class="line"> */</div><div class="line">function initXList(dataList) &#123;</div><div class="line">	var xList = new Array();</div><div class="line">	if (!isNull(dataList)) &#123;</div><div class="line">		for (var i = 0;i &lt; dataList.length; i++) &#123;</div><div class="line">			xList[i] = dataList[i][0];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return xList;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 从数据列表中，根据下标获取对应位置的数据</div><div class="line"> * @param dataList 数据列表</div><div class="line"> * @param idx 坐标</div><div class="line"> * @returns</div><div class="line"> */</div><div class="line">function initDataList(dataList, idx) &#123;</div><div class="line">	var xList = new Array();</div><div class="line">	if (!isNull(dataList)) &#123;</div><div class="line">		for (var i = 0;i &lt; dataList.length; i++) &#123;</div><div class="line">			xList[i] = dataList[i][idx];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return xList;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 根据当前图表的类型选择数据源</div><div class="line"> * @param params 图表参数</div><div class="line"> * @param myOption 图表数据选项</div><div class="line"> * @returns 加工后的图表数据</div><div class="line"> */</div><div class="line">function setChartOption(params,myOption) &#123;</div><div class="line">	// 同时选中买卖</div><div class="line">    if (true == params.selected[tp_name_arr[1]] &amp;&amp; true == params.selected[tp_name_arr[2]]) &#123;</div><div class="line">    	myOption.xAxis.data = sumXList;</div><div class="line">    	myOption.series[0].data = sumBuyDtList;</div><div class="line">    	myOption.series[1].data = sumSaleDtList;</div><div class="line">    &#125; </div><div class="line">    // 选中买</div><div class="line">    else if (true == params.selected[tp_name_arr[1]] &amp;&amp; false == params.selected[tp_name_arr[2]]) &#123;</div><div class="line">    	myOption.xAxis.data = buyXList;</div><div class="line">    	myOption.series[0].data = buyDataList;</div><div class="line">    &#125; </div><div class="line">    // 选中卖</div><div class="line">    else if (false == params.selected[tp_name_arr[1]] &amp;&amp; true == params.selected[tp_name_arr[2]]) &#123;</div><div class="line">    	myOption.xAxis.data = saleXList;</div><div class="line">    	myOption.series[1].data = saleDataList;</div><div class="line">    &#125; </div><div class="line">    // 其他情况</div><div class="line">    else &#123;</div><div class="line">    	myOption.xAxis.data = new Array();</div><div class="line">    &#125;</div><div class="line">    return myOption;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​    </p>
<!--DemandPayMapper.XML-->
<p>![待补货款]{<a href="http://upload-images.jianshu.io/upload_images/2641687-f42ba86fbbe18a63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}" target="_blank" rel="external">http://upload-images.jianshu.io/upload_images/2641687-f42ba86fbbe18a63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}</a></p>
<!--待补货款API-->
<p>![待补货款]{<a href="http://upload-images.jianshu.io/upload_images/2641687-f252d0d1c8a0cf09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}" target="_blank" rel="external">http://upload-images.jianshu.io/upload_images/2641687-f252d0d1c8a0cf09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}</a></p>
<!--待补货款实现类接口Impl-->
<p>![待补货款]{<a href="http://upload-images.jianshu.io/upload_images/2641687-73a83a4421fb8d14.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}" target="_blank" rel="external">http://upload-images.jianshu.io/upload_images/2641687-73a83a4421fb8d14.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}</a></p>
<!--待补货款图表-->
<p>![待补货款]{<a href="http://upload-images.jianshu.io/upload_images/2641687-11c4312aae1b9801.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}" target="_blank" rel="external">http://upload-images.jianshu.io/upload_images/2641687-11c4312aae1b9801.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240}</a></p>
<p>by 杨娟  2017.7.17 晚上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">// 当前点击的图形元素所属的组件名称，</div><div class="line">// 其值如 &apos;series&apos;、&apos;markLine&apos;、&apos;markPoint&apos;、&apos;timeLine&apos; 等。</div><div class="line">componentType: string,</div><div class="line">// 系列类型。值可能为：&apos;line&apos;、&apos;bar&apos;、&apos;pie&apos; 等。当 componentType 为 &apos;series&apos; 时有意义。</div><div class="line">seriesType: string,</div><div class="line">// 系列在传入的 option.series 中的 index。当 componentType 为 &apos;series&apos; 时有意义。</div><div class="line">seriesIndex: number,</div><div class="line">// 系列名称。当 componentType 为 &apos;series&apos; 时有意义。</div><div class="line">seriesName: string,</div><div class="line">// 数据名，类目名</div><div class="line">name: string,</div><div class="line">// 数据在传入的 data 数组中的 index</div><div class="line">dataIndex: number,</div><div class="line">// 传入的原始数据项</div><div class="line">data: Object,</div><div class="line">// sankey、graph 等图表同时含有 nodeData 和 edgeData 两种 data，</div><div class="line">// dataType 的值会是 &apos;node&apos; 或者 &apos;edge&apos;，表示当前点击在 node 还是 edge 上。</div><div class="line">// 其他大部分图表中只有一种 data，dataType 无意义。</div><div class="line">dataType: string,</div><div class="line">// 传入的数据值</div><div class="line">value: number|Array</div><div class="line">// 数据图形的颜色。当 componentType 为 &apos;series&apos; 时有意义。</div><div class="line">color: string</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​                                                                              </p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2017/07/18/Echarts读书笔记/" data-id="cj59dv7pn00018kuyaeyo135u" class="article-share-link">Aktie</a><div class="tags"></div><div class="post-nav"><a href="/2017/07/18/ABlog/" class="next">ABlog</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/Echarts读书笔记/">Echarts读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/ABlog/">ABlog</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/yipianwenzhang/">yipianwenzhang</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Hexo.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>